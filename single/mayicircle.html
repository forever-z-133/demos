<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="format-detection" content="telephone=no" />
<title>仿蚂蚁积分刻度盘 | 纯 CSS 版</title>
<!-- <link rel="stylesheet" href="css/Default.css"> -->
<style>
body {
    margin: 0
}
.body, .bg {
    position: absolute;
    top: 0; bottom: 0;
    left: 0; right: 0;
}
.list {
    margin: 0;
    padding: 0;
    list-style: none;
}
.body {
    background: #1AA9F5;
}
.dash {
    position: relative;
    width: 350px;
    margin: 1rem auto;
    color: #fff;
    text-align: center;
    font-family: '黑体';
    margin-bottom: -100px;  /* 这里想做出响应，没成功 */
}
.dash:before {
    content: "";
    display: block;
    padding-top: 100%;
}
.dash-bg {
    background-image: radial-gradient(closest-side at center, transparent 79.9%, #5CB9F8 80%, #5CB9F8 89.9%, transparent 90%,  transparent 95.9%, #8BCAFA 96%, #8BCAFA 98%, transparent 98.1%);
    -webkit-clip-path: polygon(0 0, 100% 0, 100% 58.8%, 50% 50%, 0 58.8%);
    clip-path: polygon(0 0, 100% 0, 100% 85%, 50% 50%, 0 85%);
}
.dash-tip {
    position: absolute;
    top: -1%;
    left: 50%;
    height: 4%;
    transform-origin: 0 1270%;
    transform: rotate(-100deg);
    transition: transform 1s ease;
}
.dash-tip .tip {
    width: 1rem;
    height: 1rem;
    display: block;
    background: #fff;
    border-radius: 50%;
    transform: translate(-50%, 0);
}
/*.dash-tip .tip:before {
    content: "";
    display: block;
    position: absolute;
    top: -20%; left: -20%;
    width: 140%; height: 140%;
    background: #eee;
}*/
.dash-number {
    position: absolute;
    left: 50%;
    top: 12%;
    width: 3rem;
    height: 10%;
    margin-left: -1.5rem;
    transform-origin: 50% 380%;
    font-size: .5em;
    /*color: #5CB9F7;*/
    opacity: .5;
}
.dash-number:nth-child(1) {
    transform: rotate(-100deg);
}
.dash-number:nth-child(2) {
    transform: rotate(-80deg);
}
.dash-number:nth-child(3) {
    transform: rotate(-60deg);
}
.dash-number:nth-child(4) {
    transform: rotate(-40deg);
}
.dash-number:nth-child(5) {
    transform: rotate(-20deg);
}
.dash-number:nth-child(6) {
    transform: rotate(0);
}
.dash-number:nth-child(7) {
    transform: rotate(20deg);
}
.dash-number:nth-child(8) {
    transform: rotate(40deg);
}
.dash-number:nth-child(9) {
    transform: rotate(60deg);
}
.dash-number:nth-child(10) {
    transform: rotate(80deg);
}
.dash-number:nth-child(11) {
    transform: rotate(100deg);
}
.dash-number.mark {
    /*color: #7DC3F9;*/
    opacity: .8;
}
.dash-number.mark:after {
    content: "";
    position: absolute;
    top: 0;
    left: 50%;
    width: 1px;
    height: 50%;
    margin-left: -.5px;
    background: #8ECDFA;
    transform: translate(0, -140%);
}
.dash-content {
    position: absolute;
    bottom: 36%;
    left: 50%;
    transform: translate(-50%, 0);
}
.user-point {
    line-height: 1;
}
.user-point .score {
    font-size: 4.2em;
}
.user-point .status {
    font-size: 1.8em;
    height: 1em;
}
.user-point .info,
.user-point .time {
    opacity: .5;
}
.user-point .time {
    font-size: .7em;
}
</style>
</head>

<body>
<div class="body">
    <!-- 仿蚂蚁积分刻度盘 | 纯 CSS 版 -->
    <div class="wrap dash" id="dash">
        <div class="bg dash-bg"></div>
        <span class="dash-tip" id="dash-tip"><span class="tip"></span></span>
        <ul class="list dash-number-list">
            <li class="dash-number mark"><span>350</span></li>
            <li class="dash-number"><span>较差</span></li>
            <li class="dash-number mark"><span>550</span></li>
            <li class="dash-number"><span>中等</span></li>
            <li class="dash-number mark"><span>600</span></li>
            <li class="dash-number"><span>良好</span></li>
            <li class="dash-number mark"><span>650</span></li>
            <li class="dash-number"><span>优秀</span></li>
            <li class="dash-number mark"><span>700</span></li>
            <li class="dash-number"><span>较好</span></li>
            <li class="dash-number mark"><span>950</span></li>
        </ul>
        <div class="dash-content user-point" id="user-point">
            <span class="info">beta</span>
            <div class="score"><strong id="user-point-score">0</strong></div>
            <div class="status"><span id="user-point-status"></span></div>
            <small class="time">评估时间: <span id="user-point-time">2016.1.20</span></small>
        </div>
    </div>
</div>
<script>
var Dash = function(defaultVal) {
    var a = function(){};
    var divide = [350, 550, 600, 650, 700, 950];
    var status = ['信用较差','信用中等', '信用良好', '信用优秀', '信用极好'];
    var $tip = document.getElementById('dash-tip');
    var $score = document.getElementById('user-point-score');
    var $status = document.getElementById('user-point-status');
    return a.prototype.setValue = function(value) {
        var s = '', r = 0, count = 0;
        if (value < 350) {
            r = -100;
            s = status[0];
        } else if (value >= 950) {
            r = 100;
            s = status[4];
        } else {
            var d = divide.slice(0);
            for(var i=0, len=d.length; i<len; i++) {
                if (value >= d[i] && value < d[i+1]) {
                    s = i;
                    r = (d[i]-value)/(d[i]-d[i+1])*40 + 40*(i) + -100;
                    break;
                }
            }
        }
        $tip.style.transform = 'rotate('+r+'deg)';
        this.numberAnim(value, 900, function(){
            $status.innerHTML = status[s];
        });
    }, a.prototype.numberAnim = function(target, time, fn){
        var timer, timerArr = [];
        var callback = function(){
            var num = $score.innerText;
            if(num < target){
                $score.innerText = parseInt($score.innerText)+1;
                timerArr.pop();
            } else {
                fn && fn();
                for (var i = 0; i < timerArr.length; i++) {
                    clearTimeout(timerArr[i]);
                }
            }
        }

        for (var i = 0; i <= target; i++) {
            (function(i){
                timer = setTimeout(callback, i*time/target);
                timerArr.push(timer);
            })(i);
        }
    }, a;
}()

window.onload = function() {
    var dash = new Dash();
    dash.setValue(690);
}
</script>
</body>
</html>