<!DOCTYPE html>
<html class="mobile">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
<meta name="renderer" content="webkit">
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="format-detection" content="telephone=no" />
<title>globalCompositeOperation</title>
<!--[if lt IE 9]><script>alert('您的浏览器版本过低，请更新本版本浏览器，或更换为诸如谷歌浏览器的现代浏览器')</script><![endif]-->
<style>
canvas {
    border: 1px solid #e6e6e6;
}
h1 {
    font-size: 1.3em;
}
h2 {
    font-size: 1.1em;
}
section {
    padding: 10px;
    box-sizing: border-box
}
@media (min-width: 992px) {
    section {
        width: 50%;
        float: left;
    }
    p {
        min-height: 3em;
    }
}
@media (min-width: 1200px) {
    section {
        width: 25%;
        float: left;
    }
}
</style>
</head>

<body>
<div class="body">
    <h1>globalCompositeOperation<br>—— Canvas 的图层模式</h1>
    <p>先画一个半透明蓝色（rgba(125,125,125,.5)）的半个方块底，再设置 globalCompositeOperation 的值，再画一个红色（red）的圆，最终效果如下</p>
</div>


<script>
var arr = {
    'source-over': '默认。在目标图像上显示源图像。',
    'source-atop': '在目标图像顶部显示源图像。源图像位于目标图像之外的部分是不可见的。',
    'source-in': '在目标图像中显示源图像。只有目标图像内的源图像部分会显示，目标图像是透明的。',
    'source-out': '在目标图像之外显示源图像。只会显示目标图像之外源图像部分，目标图像是透明的。',
    'destination-over': '在源图像上方显示目标图像。',
    'destination-atop': '在源图像顶部显示目标图像。源图像之外的目标图像部分不会被显示。',
    'destination-in': '在源图像中显示目标图像。只有源图像内的目标图像部分会被显示，源图像是透明的。',
    'destination-out': '在源图像外显示目标图像。只有源图像外的目标图像部分会被显示，源图像是透明的。',
    'lighter': '显示源图像 + 目标图像。',
    'copy': '显示源图像。忽略目标图像。',
    'xor': '使用异或操作对源图像与目标图像进行组合。',
}
for (var i in arr) {
    document.write('<section id="c_' + i + '">');
    document.write('<h2>' + i + '</h2>');
    document.write('<p>' + arr[i] + '</p>');
    var c = document.createElement("canvas");
    c.width = 200;
    c.height = 100;
    document.getElementById("c_" + i).appendChild(c);
    var ctx = c.getContext("2d");    
    ctx.fillStyle = "rgba(0,0,225,.5)";
    ctx.fillRect(0, 0, c.width/2, c.height);
    ctx.globalCompositeOperation = i;
    ctx.beginPath();
    ctx.fillStyle = "red";
    ctx.arc(100, 50, 40, 0, 2*Math.PI);
    ctx.fill();
    document.write("</section>"); 
}
</script>
</body>
</html>