<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
<meta charset="utf-8" />
<meta name="renderer" content="webkit">
<meta http-equiv="Content-Type" content="text/html" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="format-detection" content="telephone=no" />
<meta name="wap-font-scale" content="no">
<title>首页</title>
<meta name="keywords" content="张永恒, 案例库" />
<meta name="description" content="" />
<!--[if lt IE 9]><script>alert('您的浏览器版本过低，请更新本版本浏览器，或更换为诸如谷歌浏览器的现代浏览器')</script><![endif]-->
<style>
*, *:before, *:after {box-sizing: border-box;}
.nav, .list {padding: 0; margin: 0; list-style: none;}
.body, .page, .bg {
  position: absolute;
  top: 0; bottom: 0;
  left: 0; right: 0;
}
.body {
  background: #f7f7f7;
  display: flex;
  flex-direction: column;
  border: 1px solid #dedede;
  max-width: 768px;
  overflow: hidden;
  margin: auto;
}
.main {
  flex-grow: 1;
  overflow-x: hidden;
  overflow-y: auto;
  transform: translate3d(0,0,0);
  -webkit-overflow-scrolling: touch;
}
.header, .footer {
  position: relative;
  z-index: 1;
  flex-shrink: 0;
}
pre {
  padding: .5rem 1rem;
  background: #fff;
  overflow: auto;
}
.copyright {
  background: #fff;
  padding: .3rem .8rem;
  font-size: .9em;
  box-shadow: 0 0 10px rgba(0,0,0,.5);
}
.box {
  max-width: 414px;
  height: 480px;
  border: solid #000;
  margin: auto;
  overflow: auto;
}
.shape {
  float: left;
  width: 30px; height: 340px;
  shape-outside: polygon(0 0, 0 150px, 16px 154px, 30px 166px, 30px 314px, 16px 326px, 0 330px, 0 0);
  transition: shape-outside .15s;
}
.liuhai {
  width: 24px; height: 180px;
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAC1CAYAAACqN1T2AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABDFJREFUeNrsnE1sE0cUgJ/3P2uv43XshEBKqPhpGtRAI6Bq0qZQDkEc+K0qgbj050Z748KBY5HoAalC6qGKWiEEokCkcqE/EqpKI5Xyo6iq+BMqCgQoDSZE3mTtXXu97NjYpG3SYO++HpI38pN2Zy1/897Me/tmrBnujdNHNdd1AVO4P744fACQS8gTW1u2+HLjup4T4YUt10Q99pAL142JqpLmJDn786adRhAQd6oHQiQMvCIP8aqaVltfuF7f3nZeX935w8UPPrpSC8itQpjWv7Tv+fi9avqkWkgFpi5s+a3jk30bMCEVWHPv231rzxxXMCFFibYtGeg6+WUSFcKEmW86UGAQJmxQTGW6QCFMkt2vnUKHsMGwdPeHu7EhrufII939RxoqsQsjVuXHJ5LDx07urdXjq9Jm7TdHY2ialLUZGTi/lV1zmCF+5NdLG9AhxrUba3q+7xdRIVZqdFH27vAyDvutmBtLJ9EhVurRAnRI3jBj6BD00cVKIZONzg5NCDJHIW4+L+JDHIenPiEIQWZ4n7guvp9woZBDfUIQvCL8s0LToiDLEgAvAR8CcPI2WJYNhpEOBlIfi4MolJTLZ8cBRMn7KKBGogAhHoz0Y3/mYhoUE2Sv1aZbD462FMyCAuOeBjnbBj2uV75TuyZeSwtOHrhkO8Q6NkEhZ4FxcwAy968CjE9AJAJFMxpGjZpMbqEQmQdSwyLgRNl76IJQFyvNM+ws8ILkUxPXKWpj3h4Ee3S4WOVkxrxmSGAXeJDZvet3CHsABlIaW4FX61kqU3kkhezShWPXrgkbnlpUL1bIqgTz170PZtqE1O9nwbrx3bNZk2X7NxfHCzBx6wLceXAVXK0ZMqN/Af+0vtwYX5CiNlrJHyzT8xHzJvDMnh6gUHAhlUoF44zllk4ebZmMCbaVDTas+DELvX4JQhCCTBNWKhnL0/DuN8z8C5JIJP52X4JFfYGo4wlCEJ8QNm1Ah7Akm1YkKCUiCEHmosf/L5pQWCEIQQgyqyHlSSoqpNYFTjJXMJCpfjDwFQn2g+yfBbb0EdSq6rTmCnLZlsIKZZAEmSsQyuoJQhCCEIQgBCFIzSXE85RIzMmOF4QcmYsgBJmhiGIWfzon8PYsCSuyjG8upSF+Dx1S3G+PCRAi4YdKU+MQu3axRO9c8S3qbllW4itfOYc9unLxt7pOlG9QTJV48/WvUbdJMy1ad7zz6eSKwLVo3rzxM9Rd5WzHf/eZUwoahG3yXtV3aDnaJnwG6Di4vwftzIL/AgRyjoT6Yuvg6sOfL8Y6R8JueXfLAZQTMZhpmnrX983U+skiPI9nyYn4kPbySxdinSvPNvV09Q9s2/WoqmhcDsmxVzt+VJqbhmRdf8CH1bSgaaNiXP+TvQ/qGhvunOvdnqvZ/6PL235ac/yrBZjH08BUzhO0PBFgAKHmvfjcwfP7AAAAAElFTkSuQmCC) no-repeat left center;
  position: absolute;
  margin-top: 150px;
}
.content ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.content li {
  border-bottom: 1px solid #eee;
  padding: .5em;
}
</style>
</head>

<body>
<div class="body">
  <header class="header"></header>
  <main class="main">
    <p>效果跟不上是必然的，你懂我的意思吧？！</p>
    <div id="box" class="box">
      <i id="shape" class="shape"></i>
      <i class="liuhai"></i>
      <div class="content">
        <ul></ul>
      </div>
    </div>
  </main>
  <footer class="footer">
    <div class="copyright">
      使用的是 CSS 的 shape-outside，修改浮动贴齐的形状。<br>需要结合滚动监听，但浏览器本身对其处理就不太妙，所以会出现效果跟不上滑动的情况，基本无解
    </div>
  </footer>
</div>
<script src="https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>
<script>
var _html = '', _temp = '';
for (var i=0; i<100; i++) {
  _html += '<li class="item">item '+i+'</li>';
}
$('.content ul').append(_html);

var eleShape = document.getElementById('shape');
var eleBox = document.getElementById('box');

var scrollTop = 0;

// 保证shape元素高度足够
eleShape.style.height = eleBox.scrollHeight + 'px';

// 添加滚动监听
eleBox.addEventListener('load', funShape);
eleBox.addEventListener('scroll', funShape);
function funShape() {
  // scrollTop = eleBox.scrollTop;
};

requestAnimationFrame(loop);
function loop() {
  requestAnimationFrame(loop);
  scrollTop = eleBox.scrollTop;
  var shapeOutside = 'polygon(0 0, 0 '+ (150 + scrollTop) +'px, 16px '+ (154 + scrollTop) +'px, 30px '+ (166 + scrollTop) +'px, 30px '+ (314 + scrollTop) +'px, 16px '+ (326 + scrollTop) +'px, 0 '+ (330 + scrollTop) +'px, 0 0)';
  eleShape.style.shapeOutside = shapeOutside;
}
</script>
</body>
</html>