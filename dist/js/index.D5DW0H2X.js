import{u as b}from"./use-canvas.DKJ5Xgvk.js";import{h as R,z as w,g as S,i as L,j as M,k as A,l,t as C,o as D}from"./vue.gVHh-qxJ.js";function E(y){const{onScore:u=e=>{},onGameOver:m=e=>{}}=y||{};let s,r;const n=10;let c=50,a=[{x:10,y:10}],i={x:15,y:15},o=1,t=0,d=0,h;function _(e,f){s=e,r=f,p()}function x(){r.clearRect(0,0,s.width,s.height),r.fillStyle="green",a.forEach(e=>{r.fillRect(e.x*n,e.y*n,n-2,n-2)}),r.fillStyle="red",r.fillRect(i.x*n,i.y*n,n-2,n-2)}function k(){const e={x:a[0].x+o,y:a[0].y+t};e.x===i.x&&e.y===i.y?(d+=10,i={x:Math.floor(Math.random()*c),y:Math.floor(Math.random()*c)},u(d)):a.pop(),a.unshift(e)}function g(e){switch(e.code){case"ArrowUp":t!==1&&(o=0,t=-1);break;case"ArrowDown":t!==-1&&(o=0,t=1);break;case"ArrowLeft":o!==1&&(o=-1,t=0);break;case"ArrowRight":o!==-1&&(o=1,t=0);break}}function p(){c=s.width/n,a=[{x:10,y:10}],i={x:15,y:15},o=1,t=0,d=0,x()}function v(){k();const e=a[0];if(e.x<0||e.x>=c||e.y<0||e.y>=c||a.slice(1).some(f=>f.x===e.x&&f.y===e.y)){m(d);return}x(),clearTimeout(h),h=setTimeout(v,100)}return{initial:_,gameLoop:v,handleKeyDown:g,reset:p}}const B={class:"game-snake-eat-food"},G={class:"case"},T={ref:"game-box",class:"game-box"},z={ref:"canvas-ref"},K={class:"block"},j=R({title:"贪吃蛇小游戏",group:"others",__name:"index",setup(y){const u=w("game-box"),m=w("canvas-ref"),s=S(0),{initial:r,gameLoop:n,handleKeyDown:c,reset:a}=E({onScore:o=>s.value=o,onGameOver:()=>console.log(`游戏结束！得分: ${s.value}`)});b(m,{wrapperRef:u,onReady(o,t){r(o,t),n()}}),L(()=>{window.addEventListener("keydown",c)}),M(()=>{window.removeEventListener("keydown",c)});function i(){s.value=0,a(),n()}return(o,t)=>(D(),A("div",B,[t[0]||(t[0]=l("p",{class:"block"}," 贪吃蛇小游戏 ",-1)),l("div",G,[l("div",T,[l("canvas",z,null,512)],512)]),l("p",K," 当前得分："+C(s.value),1),l("button",{class:"btn",onClick:i}," 重置游戏 ")]))}});export{j as default};
